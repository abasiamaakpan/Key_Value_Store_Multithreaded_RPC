syntax = "proto3";

option java_package = "com.gRE_Multi_Threaded_Server.grpc";

service KeyValueStore {

    rpc InsertKeyValue(Pair) returns (SuccessfulPut) {}


    rpc GetKeyValue(GetKey) returns (SuccessfulGet) {}


    rpc DeleteKeyValue(DeleteKey) returns (SuccessfulDelete) {}

    rpc ClientExited(ClientExit) returns (SuccessfulExit) {}

    rpc EnterNameofClient(SendNameofClient) returns (SendNameofClient) {}

    rpc Acceptabortorcommit(Abortorcommit)  returns (SuccessfulAbort) {}

    rpc chat(stream Broadcasttoallclients) returns (stream FromServer ) {}





}

message Broadcasttoallclients{
    int32 sendabort=1;
    int32 sendprepared=2;
    int32 sendcommit=3;
    string clientname=4;


}

message FromServer{
    Broadcasttoallclients message = 1;
    SendNameofClient message2 =2;
    int32 checkglobalcommit=3;
    int32 checkprepared=4;
    int32 checkabort=5;


}

message Pair {
     int32 key = 1;
     string value = 2;
     string clientname = 3;
     int32 portnumber=4;
}


message Abortorcommit{
    int32 aborco = 1;
    string clientname = 2;

}

message SendNameofClient{
    string nameofclient = 1;

}

message GetKey{
    int32 inputkey = 1;
    string clientname = 2;
    int32 portnumber=3;

}



message DeleteKey{
    int32 theinputkey = 1;
    string clientname = 2;
    int32 portnumber=3;


}

message ClientExit{
    int32 inputkey = 1;
    string clientname = 2;

}

message SuccessfulExit{
    string message = 1;
    int32 failure = 2;

}

message SuccessfulPut{
    string message = 1;
    int32 failure = 2;

}

message SuccessfulGet{
    string message = 1;
    int32 failure = 2;

}

message SuccessfulDelete{
    string message = 1;
    int32 failure = 2;


}

message SuccessfulAbort{
    string message = 1;
    int32 failure = 2;
}




